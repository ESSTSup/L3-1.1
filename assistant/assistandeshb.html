<!DOCTYPE html>
<html lang="fr">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Tableau de Bord Assistant M√©dical</title>
    <style>
      * {
        margin: 0;
        padding: 0;
        box-sizing: border-box;
      }

      body {
        font-family: "Segoe UI", Tahoma, Geneva, Verdana, sans-serif;
        background: linear-gradient(135deg, #4f5052 0%, #271a34 100%);
        min-height: 100vh;
      }
      

      .container {
        max-width: 1400px;
        margin: 0 auto;
        padding: 20px;
      }

      .header {
        background: white;
        border-radius: 15px;
        padding: 30px;
        margin-bottom: 30px;
        box-shadow: 0 10px 30px rgba(0, 0, 0, 0.2);
      }

      .header h1 {
        color: #667eea;
        font-size: 2.5em;
        margin-bottom: 10px;
      }

      .header p {
        color: #666;
        font-size: 1.1em;
      }

      .stats {
        display: flex;
        gap: 20px;
        margin-top: 20px;
      }

      .stat-card {
        background: linear-gradient(135deg, #6a6a6b, #764ba2);
        color: white;
        padding: 20px;
        border-radius: 10px;
        flex: 1;
        text-align: center;
      }

      .stat-card h3 {
        font-size: 2em;
        margin-bottom: 5px;
      }

      .stat-card p {
        opacity: 0.9;
      }

      .nav-tabs {
        display: flex;
        gap: 10px;
        margin-bottom: 30px;
        flex-wrap: wrap;
      }

      .tab-btn {
        background: white;
        border: none;
        padding: 15px 30px;
        border-radius: 10px;
        cursor: pointer;
        font-size: 1em;
        font-weight: 600;
        color: #333;
        transition: all 0.3s;
        box-shadow: 0 4px 15px rgba(0, 0, 0, 0.1);
      }

      .tab-btn:hover {
        transform: translateY(-2px);
        box-shadow: 0 6px 20px rgba(0, 0, 0, 0.15);
      }

      .tab-btn.active {
        background: linear-gradient(135deg, #757577, #764ba2);
        color: white;
      }

      .content {
        background: white;
        border-radius: 15px;
        padding: 30px;
        box-shadow: 0 10px 30px rgba(0, 0, 0, 0.2);
      }

      .tab-content {
        display: none;
      }

      .tab-content.active {
        display: block;
      }

      .medecin-grid {
        display: grid;
        grid-template-columns: repeat(auto-fit, minmax(300px, 1fr));
        gap: 20px;
      }

      .medecin-card {
        background: linear-gradient(135deg, #545054 0%, #797777 100%);
        color: white;
        padding: 25px;
        border-radius: 10px;
        box-shadow: 0 5px 15px rgba(0, 0, 0, 0.1);
      }

      .medecin-card h3 {
        font-size: 1.5em;
        margin-bottom: 10px;
      }

      .medecin-card p {
        opacity: 0.9;
        margin-bottom: 15px;
      }

      .medecin-info {
        display: flex;
        justify-content: space-between;
        margin-top: 15px;
      }

      .form-group {
        margin-bottom: 20px;
      }

      .form-group label {
        display: block;
        margin-bottom: 8px;
        font-weight: 600;
        color: #333;
      }

      .form-group input,
      .form-group select,
      .form-group textarea {
        width: 100%;
        padding: 12px;
        border: 2px solid #e0e0e0;
        border-radius: 8px;
        font-size: 1em;
        transition: border 0.3s;
      }

      .form-group input:focus,
      .form-group select:focus,
      .form-group textarea:focus {
        outline: none;
        border-color: #667eea;
      }

      .form-row {
        display: grid;
        grid-template-columns: 1fr 1fr;
        gap: 20px;
      }

      .btn {
        background: linear-gradient(135deg, #626369, #764ba2);
        color: white;
        border: none;
        padding: 15px 30px;
        border-radius: 8px;
        cursor: pointer;
        font-size: 1em;
        font-weight: 600;
        transition: all 0.3s;
        box-shadow: 0 4px 15px rgba(102, 126, 234, 0.4);
      }

      .btn:hover {
        transform: translateY(-2px);
        box-shadow: 0 6px 20px rgba(102, 126, 234, 0.6);
      }

      .btn-full {
        width: 100%;
      }

      .btn-small {
        padding: 8px 16px;
        font-size: 0.9em;
      }

      .btn-success {
        background: linear-gradient(135deg, #11998e, #38ef7d);
      }

      .btn-danger {
        background: linear-gradient(135deg, #eb3349, #f45c43);
      }

      .search-filter {
        display: flex;
        gap: 15px;
        margin-bottom: 20px;
      }

      .search-filter input,
      .search-filter select {
        padding: 12px;
        border: 2px solid #e0e0e0;
        border-radius: 8px;
        font-size: 1em;
      }

      .search-filter input {
        flex: 1;
      }

      table {
        width: 100%;
        border-collapse: collapse;
        margin-top: 20px;
      }

      thead {
        background: #f8f9fa;
      }

      th {
        padding: 15px;
        text-align: left;
        font-weight: 600;
        color: #333;
        border-bottom: 2px solid #e0e0e0;
      }

      td {
        padding: 15px;
        border-bottom: 1px solid #e0e0e0;
      }

      tr:hover {
        background: #f8f9fa;
      }

      .badge {
        display: inline-block;
        padding: 5px 12px;
        border-radius: 20px;
        font-size: 0.85em;
        font-weight: 600;
      }

      .badge-medecin {
        background: #e3f2fd;
        color: #1976d2;
      }

      .attente-item {
        border: 2px solid #e0e0e0;
        border-radius: 10px;
        padding: 20px;
        margin-bottom: 15px;
        display: flex;
        justify-content: space-between;
        align-items: center;
        transition: all 0.3s;
      }

      .attente-item.pret {
        border-color: #38ef7d;
        background: #f0fff4;
      }

      .attente-info {
        display: flex;
        align-items: center;
        gap: 20px;
      }

      .attente-heure {
        background: #667eea;
        color: white;
        padding: 15px 25px;
        border-radius: 8px;
        font-size: 1.3em;
        font-weight: bold;
      }

      .attente-item.pret .attente-heure {
        background: #38ef7d;
      }

      .attente-details h3 {
        font-size: 1.2em;
        margin-bottom: 5px;
      }

      .attente-details p {
        color: #666;
      }

      .actions {
        display: flex;
        gap: 10px;
      }

      .empty-state {
        text-align: center;
        padding: 60px 20px;
        color: #999;
      }

      .empty-state svg {
        width: 80px;
        height: 80px;
        margin-bottom: 20px;
        opacity: 0.3;
      }

      @media (max-width: 768px) {
        .form-row {
          grid-template-columns: 1fr;
        }

        .search-filter {
          flex-direction: column;
        }

        .attente-item {
          flex-direction: column;
          gap: 15px;
          text-align: center;
        }

        table {
          font-size: 0.9em;
        }
      }
    </style>
  </head>
  <body>
    <div class="container">
      <div class="header">
        <h1>üè• Tableau de Bord Assistant</h1>
        <p>Gestion des patients et rendez-vous</p>
        <div class="stats">
          <div class="stat-card">
            <h3 id="totalPatients">0</h3>
            <p>Patients Total</p>
          </div>
          <div class="stat-card">
            <h3 id="totalAttente">0</h3>
            <p>En Attente</p>
          </div>
        </div>
      </div>

      <div class="nav-tabs">
        <button class="tab-btn active" onclick="showTab('accueil')">
          üè† Accueil
        </button>
        <button class="tab-btn" onclick="showTab('nouveau')">
          ‚ûï Nouveau Patient
        </button>
        <button class="tab-btn" onclick="showTab('patients')">
          üë• Tous les Patients
        </button>
        <button class="tab-btn" onclick="showTab('attente')">
          ‚è∞ File d'Attente
        </button>
      </div>

      <div class="content">
        <!-- Accueil -->
        <div id="accueil" class="tab-content active">
          <h2>Vue d'ensemble par M√©decin</h2>
          <div class="medecin-grid" id="medecinGrid"></div>
        </div>

        <!-- Nouveau Patient -->
        <div id="nouveau" class="tab-content">
          <h2>Inscription Nouveau Patient</h2>
          <div class="form-row">
            <div class="form-group">
              <label>Nom *</label>
              <input type="text" id="nom" required />
            </div>
            <div class="form-group">
              <label>Pr√©nom *</label>
              <input type="text" id="prenom" required />
            </div>
          </div>
          <div class="form-row">
            <div class="form-group">
              <label>T√©l√©phone *</label>
              <input type="tel" id="tel" required />
            </div>
            <div class="form-group">
              <label>Email *</label>
              <input type="email" id="email" required />
            </div>
          </div>
          <div class="form-row">
            <div class="form-group">
              <label>Date de Naissance *</label>
              <input type="date" id="dateNaissance" required />
            </div>
            <div class="form-group">
              <label>M√©decin *</label>
              <select id="medecinSelect"></select>
            </div>
          </div>
          <div class="form-group">
            <label>Adresse *</label>
            <textarea id="adresse" rows="3" required></textarea>
          </div>
          <button class="btn btn-full" onclick="ajouterPatient()">
            ‚ûï Inscrire le Patient et Envoyer Email
          </button>
        </div>

        <!-- Tous les Patients -->
        <div id="patients" class="tab-content">
          <h2>Liste des Patients</h2>
          <div class="search-filter">
            <input
              type="text"
              id="searchPatient"
              placeholder="üîç Rechercher par nom..."
              onkeyup="filtrerPatients()"
            />
            <select id="filterMedecin" onchange="filtrerPatients()">
              <option value="">Tous les m√©decins</option>
            </select>
          </div>
          <table>
            <thead>
              <tr>
                <th>Patient</th>
                <th>Contact</th>
                <th>M√©decin</th>
                <th>Inscription</th>
                <th>Actions</th>
              </tr>
            </thead>
            <tbody id="patientsTable"></tbody>
          </table>
        </div>

        <!-- File d'Attente -->
        <div id="attente" class="tab-content">
          <h2>File d'Attente</h2>
          <div id="fileAttente"></div>
        </div>
      </div>
    </div>

    <script>
      // Donn√©es
      let medecins = [
        { id: 1, nom: "Dr. Benali", specialite: "Cardiologue" },
        { id: 2, nom: "Dr. Meziane", specialite: "G√©n√©raliste" },
        { id: 3, nom: "Dr. Khelif", specialite: "P√©diatre" },
      ];

      let patients = [
        {
          id: 1,
          nom: "Amara",
          prenom: "Karim",
          tel: "0555123456",
          email: "karim@email.dz",
          medecinId: 1,
          dateInscription: "2025-01-15",
        },
        {
          id: 2,
          nom: "Bouazza",
          prenom: "Sarah",
          tel: "0666789012",
          email: "sarah@email.dz",
          medecinId: 1,
          dateInscription: "2025-02-10",
        },
        {
          id: 3,
          nom: "Cherif",
          prenom: "Mohamed",
          tel: "0777345678",
          email: "mohamed@email.dz",
          medecinId: 2,
          dateInscription: "2025-03-05",
        },
      ];

      let fileAttente = [
        {
          id: 1,
          patientId: 1,
          medecinId: 1,
          heure: "09:00",
          statut: "en_attente",
        },
        {
          id: 2,
          patientId: 2,
          medecinId: 1,
          heure: "09:30",
          statut: "en_attente",
        },
      ];

      // Initialisation
      function init() {
        remplirSelectMedecins();
        afficherAccueil();
        afficherPatients();
        afficherFileAttente();
        mettreAJourStats();
      }

      function showTab(tabName) {
        const tabs = document.querySelectorAll(".tab-content");
        const btns = document.querySelectorAll(".tab-btn");

        tabs.forEach((tab) => tab.classList.remove("active"));
        btns.forEach((btn) => btn.classList.remove("active"));

        document.getElementById(tabName).classList.add("active");
        event.target.classList.add("active");
      }

      function remplirSelectMedecins() {
        const select = document.getElementById("medecinSelect");
        const filterSelect = document.getElementById("filterMedecin");

        select.innerHTML = '<option value="">Choisir un m√©decin</option>';

        medecins.forEach((m) => {
          select.innerHTML += `<option value="${m.id}">${m.nom} - ${m.specialite}</option>`;
          filterSelect.innerHTML += `<option value="${m.id}">${m.nom}</option>`;
        });
      }

      function afficherAccueil() {
        const grid = document.getElementById("medecinGrid");
        grid.innerHTML = "";

        medecins.forEach((medecin) => {
          const patientsCount = patients.filter(
            (p) => p.medecinId === medecin.id
          ).length;
          const enAttente = fileAttente.filter(
            (f) => f.medecinId === medecin.id
          ).length;

          grid.innerHTML += `
                    <div class="medecin-card">
                        <h3>${medecin.nom}</h3>
                        <p>${medecin.specialite}</p>
                        <div class="medecin-info">
                            <div>
                                <strong>Patients:</strong> ${patientsCount}
                            </div>
                            <div>
                                <strong>En attente:</strong> ${enAttente}
                            </div>
                        </div>
                    </div>
                `;
        });
      }

      function ajouterPatient() {
        const nom = document.getElementById("nom").value;
        const prenom = document.getElementById("prenom").value;
        const tel = document.getElementById("tel").value;
        const email = document.getElementById("email").value;
        const dateNaissance = document.getElementById("dateNaissance").value;
        const adresse = document.getElementById("adresse").value;
        const medecinId = parseInt(
          document.getElementById("medecinSelect").value
        );

        if (
          !nom ||
          !prenom ||
          !tel ||
          !email ||
          !dateNaissance ||
          !adresse ||
          !medecinId
        ) {
          alert("‚ö†Ô∏è Veuillez remplir tous les champs");
          return;
        }

        const patient = {
          id: patients.length + 1,
          nom,
          prenom,
          tel,
          email,
          medecinId,
          dateInscription: new Date().toISOString().split("T")[0],
        };

        patients.push(patient);

        const motDePasse = Math.random().toString(36).slice(-8);
        alert(
          `‚úÖ Patient inscrit avec succ√®s!\n\nEmail envoy√© √†: ${email}\n\nIdentifiants:\nEmail: ${email}\nMot de passe: ${motDePasse}`
        );

        // R√©initialiser le formulaire
        document.getElementById("nom").value = "";
        document.getElementById("prenom").value = "";
        document.getElementById("tel").value = "";
        document.getElementById("email").value = "";
        document.getElementById("dateNaissance").value = "";
        document.getElementById("adresse").value = "";
        document.getElementById("medecinSelect").value = "";

        afficherPatients();
        afficherAccueil();
        mettreAJourStats();
        showTab("patients");
      }

      function afficherPatients() {
        filtrerPatients();
      }

      function filtrerPatients() {
        const searchTerm = document
          .getElementById("searchPatient")
          .value.toLowerCase();
        const filterMedecin = document.getElementById("filterMedecin").value;

        const patientsFiltres = patients.filter((p) => {
          const matchSearch =
            p.nom.toLowerCase().includes(searchTerm) ||
            p.prenom.toLowerCase().includes(searchTerm);
          const matchMedecin =
            !filterMedecin || p.medecinId === parseInt(filterMedecin);
          return matchSearch && matchMedecin;
        });

        const tbody = document.getElementById("patientsTable");
        tbody.innerHTML = "";

        patientsFiltres.forEach((patient) => {
          const medecin = medecins.find((m) => m.id === patient.medecinId);
          const autresMedecins = medecins.filter(
            (m) => m.id !== patient.medecinId
          );

          tbody.innerHTML += `
                    <tr>
                        <td><strong>${patient.prenom} ${
            patient.nom
          }</strong></td>
                        <td>
                            ${patient.tel}<br>
                            <small style="color: #666;">${patient.email}</small>
                        </td>
                        <td><span class="badge badge-medecin">${
                          medecin.nom
                        }</span></td>
                        <td>${patient.dateInscription}</td>
                        <td>
                            <div class="actions">
                                <button class="btn btn-small btn-success" onclick="ajouterAFileAttente(${
                                  patient.id
                                }, ${patient.medecinId})">
                                    ‚ûï File
                                </button>
                                <select class="btn-small" onchange="transfererPatient(${
                                  patient.id
                                }, this.value); this.value='';">
                                    <option value="">Transf√©rer...</option>
                                    ${autresMedecins
                                      .map(
                                        (m) =>
                                          `<option value="${m.id}">${m.nom}</option>`
                                      )
                                      .join("")}
                                </select>
                            </div>
                        </td>
                    </tr>
                `;
        });
      }

      function ajouterAFileAttente(patientId, medecinId) {
        const now = new Date();
        const heure = now.toLocaleTimeString("fr-FR", {
          hour: "2-digit",
          minute: "2-digit",
        });

        fileAttente.push({
          id: fileAttente.length + 1,
          patientId,
          medecinId,
          heure,
          statut: "en_attente",
        });

        alert("‚úÖ Patient ajout√© √† la file d'attente");
        afficherFileAttente();
        mettreAJourStats();
      }

      function transfererPatient(patientId, nouveauMedecinId) {
        if (!nouveauMedecinId) return;

        const patient = patients.find((p) => p.id === patientId);
        if (patient) {
          const nouveauPatient = {
            ...patient,
            id: patients.length + 1,
            medecinId: parseInt(nouveauMedecinId),
            dateInscription: new Date().toISOString().split("T")[0],
          };
          patients.push(nouveauPatient);
          alert("‚úÖ Patient transf√©r√© avec succ√®s!");
          afficherPatients();
          afficherAccueil();
          mettreAJourStats();
        }
      }

      function afficherFileAttente() {
        const container = document.getElementById("fileAttente");

        if (fileAttente.length === 0) {
          container.innerHTML = `
                    <div class="empty-state">
                        <svg fill="none" stroke="currentColor" viewBox="0 0 24 24">
                            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M12 8v4l3 3m6-3a9 9 0 11-18 0 9 9 0 0118 0z"></path>
                        </svg>
                        <h3>Aucun patient en attente</h3>
                    </div>
                `;
          return;
        }

        container.innerHTML = "";
        fileAttente.forEach((item) => {
          const patient = patients.find((p) => p.id === item.patientId);
          const medecin = medecins.find((m) => m.id === item.medecinId);

          container.innerHTML += `
                    <div class="attente-item ${
                      item.statut === "pret" ? "pret" : ""
                    }">
                        <div class="attente-info">
                            <div class="attente-heure">${item.heure}</div>
                            <div class="attente-details">
                                <h3>${patient.prenom} ${patient.nom}</h3>
                                <p>${medecin.nom}</p>
                                <p style="font-size: 0.9em; color: #999;">${
                                  patient.tel
                                }</p>
                            </div>
                        </div>
                        <div class="actions">
                            ${
                              item.statut === "en_attente"
                                ? `<button class="btn btn-success" onclick="marquerPret(${item.id})">üîî C'est son tour</button>`
                                : `<button class="btn btn-danger" onclick="terminerConsultation(${item.id})">‚úì Terminer</button>`
                            }
                        </div>
                    </div>
                `;
        });
      }

      function marquerPret(id) {
        const item = fileAttente.find((f) => f.id === id);
        if (item) {
          item.statut = "pret";
          afficherFileAttente();
        }
      }

      function terminerConsultation(id) {
        fileAttente = fileAttente.filter((f) => f.id !== id);
        afficherFileAttente();
        mettreAJourStats();
      }

      function mettreAJourStats() {
        document.getElementById("totalPatients").textContent = patients.length;
        document.getElementById("totalAttente").textContent =
          fileAttente.length;
      }

      // Lancer l'application
      init();
    </script>
  </body>
</html>
