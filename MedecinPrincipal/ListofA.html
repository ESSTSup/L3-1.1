<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>List of Assistants</title>
  <link rel="stylesheet" href="ListofA.css">
</head>
<body>
  <header>
    <h1>List of Assistants</h1>
    <nav>
      <a href="Dash.html">Dashboard</a>
      <a href="AddA.html" class="add-btn">+ Add Assistant</a>
    </nav>
  </header>

  <main>
    <table id="assistantsTable">
      <thead>
        <tr>
          <th>Name</th>
          <th>Supervising Doctor</th>
          <th>Phone</th>
          <th>Email</th>
          <th>Status</th>
          <th>Actions</th>
        </tr>
      </thead>
      <tbody>
        
      </tbody>
    </table>
  </main>

  <script>
    document.addEventListener('DOMContentLoaded', function() {
     
      const defaultAssistants = [
        { 
          id: 1,
          name: "Sarah Benali", 
          doctor: "Dr. Karim", 
          phone: "+213 654 321 987", 
          email: "sarah.benali@clinic.com", 
          status: "Active" 
        },
        { 
          id: 2,
          name: "Amine Haddad", 
          doctor: "Dr. Yasmine", 
          phone: "+213 665 111 234", 
          email: "amine.haddad@clinic.com", 
          status: "Inactive" 
        },
        { 
          id: 3,
          name: "Lina Bouchama", 
          doctor: "Dr. Mehdi", 
          phone: "+213 779 888 111", 
          email: "lina.bouchama@clinic.com", 
          status: "Active" 
        }
      ];

      
      let assistants = JSON.parse(localStorage.getItem("assistants")) || defaultAssistants;
      
      
      if (JSON.parse(localStorage.getItem("assistants")) === null) {
        localStorage.setItem("assistants", JSON.stringify(assistants));
      }

      const tbody = document.querySelector("#assistantsTable tbody");

     
      function displayAssistants() {
        tbody.innerHTML = "";

        assistants.forEach((assistant) => {
          const row = document.createElement("tr");
          row.innerHTML = `
            <td>${assistant.name}</td>
            <td>${assistant.doctor}</td>
            <td>${assistant.phone}</td>
            <td>${assistant.email}</td>
            <td>
              <span class="status ${assistant.status.toLowerCase()}">${assistant.status}</span>
            </td>
            <td class="actions">
              <button class="view" onclick="viewAssistant(${assistant.id})">View</button>
              <button class="edit" onclick="editAssistant(${assistant.id})">Edit</button>
              <button class="delete" onclick="deleteAssistant(${assistant.id})">Delete</button>
              <button class="report" onclick="reportAssistant(${assistant.id})">Report</button>
            </td>
          `;
          tbody.appendChild(row);
        });
      }

      
      function saveAssistants() {
        localStorage.setItem("assistants", JSON.stringify(assistants));
      }

      
      window.viewAssistant = function(id) {
        const assistant = assistants.find(a => a.id === id);
        if (assistant) {
          alert(`Assistant Info:\n\nName: ${assistant.name}\nDoctor: ${assistant.doctor}\nPhone: ${assistant.phone}\nEmail: ${assistant.email}\nStatus: ${assistant.status}`);
        }
      };

      
      window.editAssistant = function(id) {
        const assistant = assistants.find(a => a.id === id);
        if (assistant) {
          const newName = prompt("Edit name:", assistant.name);
          const newDoctor = prompt("Edit supervising doctor:", assistant.doctor);
          const newPhone = prompt("Edit phone:", assistant.phone);
          const newEmail = prompt("Edit email:", assistant.email);
          const newStatus = prompt("Edit status (Active/Inactive):", assistant.status);

          if (newName && newDoctor && newPhone && newEmail && newStatus) {
            assistant.name = newName;
            assistant.doctor = newDoctor;
            assistant.phone = newPhone;
            assistant.email = newEmail;
            assistant.status = newStatus;
            
            saveAssistants();
            displayAssistants();
            alert("Assistant updated successfully!");
          }
        }
      };

      window.deleteAssistant = function(id) {
        const assistant = assistants.find(a => a.id === id);
        if (assistant && confirm(`Are you sure you want to delete ${assistant.name}?`)) {
          
          localStorage.setItem('assistantToDelete', id);
          
          
          window.location.href = 'DeletA.html';
        }
      };

      
      window.reportAssistant = function(id) {
        const assistant = assistants.find(a => a.id === id);
        if (assistant) {
          const reportData = {
            assistant: assistant.name,
            doctor: assistant.doctor,
            status: assistant.status,
            date: new Date().toLocaleDateString(),
            type: 'Performance Report'
          };
          
          
          let reports = JSON.parse(localStorage.getItem('assistantReports')) || [];
          reports.push(reportData);
          localStorage.setItem('assistantReports', JSON.stringify(reports));
          
          alert(`Report generated for ${assistant.name}\nReport saved to system.`);
        }
      };

     
      function filterByStatus(status) {
        if (status === 'all') {
          displayAssistants();
        } else {
          const filteredAssistants = assistants.filter(a => a.status === status);
          tbody.innerHTML = "";
          filteredAssistants.forEach(assistant => {
            const row = document.createElement("tr");
            row.innerHTML = `
              <td>${assistant.name}</td>
              <td>${assistant.doctor}</td>
              <td>${assistant.phone}</td>
              <td>${assistant.email}</td>
              <td>
                <span class="status ${assistant.status.toLowerCase()}">${assistant.status}</span>
              </td>
              <td class="actions">
                <button class="view" onclick="viewAssistant(${assistant.id})">View</button>
                <button class="edit" onclick="editAssistant(${assistant.id})">Edit</button>
                <button class="delete" onclick="deleteAssistant(${assistant.id})">Delete</button>
                <button class="report" onclick="reportAssistant(${assistant.id})">Report</button>
              </td>
            `;
            tbody.appendChild(row);
          });
        }
      }

     
      function searchAssistants(query) {
        const filteredAssistants = assistants.filter(a => 
          a.name.toLowerCase().includes(query.toLowerCase()) ||
          a.doctor.toLowerCase().includes(query.toLowerCase()) ||
          a.email.toLowerCase().includes(query.toLowerCase())
        );
        
        tbody.innerHTML = "";
        filteredAssistants.forEach(assistant => {
          const row = document.createElement("tr");
          row.innerHTML = `
            <td>${assistant.name}</td>
            <td>${assistant.doctor}</td>
            <td>${assistant.phone}</td>
            <td>${assistant.email}</td>
            <td>
              <span class="status ${assistant.status.toLowerCase()}">${assistant.status}</span>
            </td>
            <td class="actions">
              <button class="view" onclick="viewAssistant(${assistant.id})">View</button>
              <button class="edit" onclick="editAssistant(${assistant.id})">Edit</button>
              <button class="delete" onclick="deleteAssistant(${assistant.id})">Delete</button>
              <button class="report" onclick="reportAssistant(${assistant.id})">Report</button>
            </td>
          `;
          tbody.appendChild(row);
        });
      }

      
      displayAssistants();

     
      window.filterByStatus = filterByStatus;
      window.searchAssistants = searchAssistants;
    });
  </script>
</body>
</html>