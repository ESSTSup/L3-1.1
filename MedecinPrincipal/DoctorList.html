<!DOCTYPE html>
<html lang="fr">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>Liste des Docteurs</title>
  <link rel="stylesheet" href="DoctorList.css" />
</head>
<body>
  <div class="doctors-container">
    <h1>Liste des Docteurs</h1>

    <button id="addDoctorBtn" class="add-btn"> Add Doctor</button>

    <div id="addDoctorForm" class="form-container hidden">
      <input type="text" id="doctorName" placeholder="Nom du docteur" required />
      <input type="text" id="doctorSpecialty" placeholder="SpÃ©cialitÃ©" required />
      <button id="saveDoctor" class="save-btn">Save</button>
    </div>

    <ul id="doctorsList" class="DoctorList"></ul>
  </div>

  <script>
    document.addEventListener('DOMContentLoaded', function() {
      const list = document.getElementById("doctorsList");
      const addBtn = document.getElementById("addDoctorBtn");
      const form = document.getElementById("addDoctorForm");
      const saveBtn = document.getElementById("saveDoctor");

      
      let doctors = JSON.parse(localStorage.getItem("doctors")) || [
        { id: 1, name: "Dr. Ahmed B.", specialty: "Cardiologue" },
        { id: 2, name: "Dr. Sofia M.", specialty: "Dermatologue" }
      ];

     
      if (JSON.parse(localStorage.getItem("doctors")) === null) {
        localStorage.setItem("doctors", JSON.stringify(doctors));
      }

      function renderList() {
        list.innerHTML = "";
        doctors.forEach((doc) => {
          const li = document.createElement("li");
          li.className = "doctor-card";
          li.innerHTML = `
            <div class="doctor-info">
              <h3>${doc.name}</h3>
              <p>ðŸ©º ${doc.specialty}</p>
            </div>
            <div class="doctor-actions">
              <button class="edit-btn" data-id="${doc.id}">Edit</button>
              <button class="delete-btn" data-id="${doc.id}">Delete</button>
            </div>
          `;
          list.appendChild(li);
        });

        
        attachEventListeners();
      }

      function attachEventListeners() {
       
        document.querySelectorAll('.edit-btn').forEach(btn => {
          btn.addEventListener('click', function() {
            const doctorId = this.getAttribute('data-id');
            editDoctor(doctorId);
          });
        });

        
        document.querySelectorAll('.delete-btn').forEach(btn => {
          btn.addEventListener('click', function() {
            const doctorId = this.getAttribute('data-id');
            deleteDoctor(doctorId);
          });
        });
      }

      function editDoctor(doctorId) {
        const doctor = doctors.find(d => d.id == doctorId);
        if (doctor) {
          const newName = prompt("Modifier le nom:", doctor.name);
          const newSpecialty = prompt("Modifier la spÃ©cialitÃ©:", doctor.specialty);
          
          if (newName && newSpecialty) {
            doctor.name = newName;
            doctor.specialty = newSpecialty;
            saveDoctors();
            renderList();
          }
        }
      }

      function deleteDoctor(doctorId) {
        const doctor = doctors.find(d => d.id == doctorId);
        if (doctor && confirm(`ÃŠtes-vous sÃ»r de vouloir supprimer ${doctor.name} ?`)) {
          doctors = doctors.filter(d => d.id != doctorId);
          saveDoctors();
          renderList();
        }
      }

      function saveDoctors() {
        localStorage.setItem("doctors", JSON.stringify(doctors));
      }

      
      addBtn.addEventListener("click", () => {
        form.classList.toggle("hidden");
      });

      
      saveBtn.addEventListener("click", () => {
        const name = document.getElementById("doctorName").value.trim();
        const specialty = document.getElementById("doctorSpecialty").value.trim();

        if (!name || !specialty) {
          alert("Veuillez remplir tous les champs !");
          return;
        }

        const newDoctor = {
          id: Date.now(), 
          name,
          specialty
        };

        doctors.push(newDoctor);
        saveDoctors();
        
        document.getElementById("doctorName").value = "";
        document.getElementById("doctorSpecialty").value = "";
        form.classList.add("hidden");

        renderList();
      });

      
      renderList();
    });
  </script>
</body>
</html>